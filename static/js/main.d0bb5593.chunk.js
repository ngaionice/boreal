(this.webpackJsonpboreal=this.webpackJsonpboreal||[]).push([[0],{179:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(49),c=n.n(r),i=n(7),s=n(22),o=n(230),l=n(231),u=n(240),d=n(232),j=n(17),b=n(241),h=n(125),O=n(52),p=n(109),f=n(53),x=function(){var e=360;return{flex:{flex:1},paginator:{justifyContent:"center",padding:"4px"},drawerWidth:e,drawer:{width:{md:e},flexShrink:{md:0}},appBar:{width:{md:"calc(100% - ".concat(e,"px)")},ml:{md:"".concat(e,"px")}},menuButton:{marginRight:2,display:{md:"none"}},content:{flexGrow:1,padding:3},contentWrapper:{flexGrow:1,paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,marginLeft:"".concat(e,"px")},contentMobileWrapper:{flexGrow:1,paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},loader:{padding:2}}},m=n(36),v=n.n(m),g=n(45),y=n(74),C=n.n(y),S=n(222),k=n(234),w=n(246),E=n(247),D=n(248),J=n(235),F=n(245),T=n(249),P=n(251),I=n(111),N=n.n(I),R=n(20),M=n(18),A=n.n(M),W=n(242),L=n(243),B=n(0),H=function(){var e=x();return Object(B.jsx)(W.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:e.loader,children:Object(B.jsx)(L.a,{})})},G=function(e){var t=e.fetchedData,n=e.setFetchedData,r=e.onCourseSelection,c=e.onButtonClick,s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],h=j[1],O=Object(a.useRef)(new Date),p=Object(a.useState)(1),f=Object(i.a)(p,2),x=f[0],m=f[1],y=Object(a.useState)(Math.ceil(Object.keys(t).length/10)),k=Object(i.a)(y,2),w=k[0],E=k[1];return Object(a.useEffect)((function(){var e=!1,t=function(){var t=Object(g.a)(v.a.mark((function t(){var a,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://ionice.herokuapp.com/https://timetable.iit.artsci.utoronto.ca/api/20219/courses?code=".concat(l),O.current=new Date,t.next=4,C.a.get(a,{headers:{}});case 4:r=t.sent,c=r.data,e||(Object.keys(c).forEach((function(e){c[e].updated=O.current})),n(c),E(Math.ceil(Object.keys(c).length/10)));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=setTimeout((function(){l&&(h(!0),m(1),t().then((function(){return h(!1)})))}),500);return function(){clearTimeout(a),e=!0}}),[l,n]),Object(B.jsxs)(S.a,{flex:1,spacing:1,children:[Object(B.jsx)(U,{searchTerm:l,setSearchTerm:u,onButtonClick:c}),Object(B.jsx)(_,{loading:b,data:t,onCourseClick:function(){r()},pageControl:[x,m],noOfPages:w,itemsPerPage:10,searchTerm:l})]})},U=function(e){var t=e.searchTerm,n=e.setSearchTerm,a=e.onButtonClick;return Object(B.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(B.jsxs)(S.a,{spacing:1,children:[Object(B.jsx)(k.a,{id:"code-input",label:"Course Code",variant:"outlined",placeholder:"Quick search",value:t,onChange:function(e){return n(e.target.value.toUpperCase())},fullWidth:!0,size:"small",flex:1}),Object(B.jsx)(w.a,{variant:"caption",children:"Quick search shows courses for the current year. For more options, use advanced search."}),Object(B.jsx)(E.a,{variant:"outlined",color:"inherit",startIcon:Object(B.jsx)(N.a,{}),component:R.b,to:"/search",onClick:a,children:"Advanced Search"})]})})},_=function(e){var t=e.loading,n=e.data,a=e.onCourseClick,r=e.pageControl,c=e.itemsPerPage,s=e.noOfPages,o=e.searchTerm;if(t)return Object(B.jsx)(H,{});if(!o)return Object(B.jsxs)(S.a,{spacing:1,justifyContent:"center",alignItems:"center",children:[Object(B.jsx)(D.a,{flexItem:!0}),Object(B.jsx)(w.a,{variant:"body2",children:"Start searching to see courses here!"})]});if(null===n||A.a.isEmpty(n))return Object(B.jsxs)(S.a,{spacing:1,justifyContent:"center",alignItems:"center",children:[Object(B.jsx)(D.a,{flexItem:!0}),Object(B.jsx)(w.a,{variant:"body2",children:"No courses found."})]});var l=x(),u=Object(i.a)(r,2),d=u[0],j=u[1];return Object(B.jsxs)(S.a,{spacing:1,children:[Object(B.jsx)(D.a,{}),Object(B.jsx)(J.a,{count:s,page:d,onChange:function(e,t){j(t)},defaultPage:1,siblingCount:0,boundaryCount:1,color:"primary",sx:{ul:l.paginator}}),Object(B.jsx)(D.a,{}),Object(B.jsx)(F.a,{dense:!0,children:Object.keys(n).slice((d-1)*c,d*c).map((function(e){var t=n[e],r=t.courseTitle,c=t.code,i=t.section,s=t.session;return Object(B.jsx)(T.a,{button:!0,onClick:function(){return a(t)},component:R.b,to:"/course/".concat(s,"/").concat(i.toLowerCase(),"/").concat(c.toLowerCase()),children:Object(B.jsx)(P.a,{primary:r,secondary:"".concat(c).concat(i)})},e)}))})]})},q=n(228),Q=n(252),V=n(253),Y=n(238),z=n(254),K=n(113),X=n.n(K),Z=n(114),$=n.n(Z),ee=n(115),te=n.n(ee),ne=function(e){var t=e.label,n=e.icon,a=e.right,r=void 0===a?null:a,c=e.to,i=void 0===c?null:c,s=e.onClick,o=void 0===s?null:s;return Object(B.jsx)(T.a,{children:Object(B.jsxs)(q.a,{component:R.b,to:i,onClick:o,children:[Object(B.jsx)(Q.a,{children:n}),Object(B.jsx)(P.a,{primary:t}),r]})})},ae=function(e){var t=e.children,n=e.mobileClose;return Object(B.jsxs)(F.a,{dense:!0,children:[Object(B.jsx)(V.a,{id:"site-functions",children:"Site functions"}),Object(B.jsx)(ne,{label:"Bookmarks",icon:Object(B.jsx)(X.a,{}),to:"/bookmarks",onClick:n}),Object(B.jsx)(ne,{label:"Timetable",icon:Object(B.jsx)($.a,{}),to:"/timetable",onClick:n}),Object(B.jsx)(ne,{label:"Settings",icon:Object(B.jsx)(te.a,{}),to:"/settings",onClick:n}),Object(B.jsx)(V.a,{id:"search",children:"Search"}),Object(B.jsx)(T.a,{disableGutters:!0,children:Object(B.jsxs)(W.a,{padding:2,children:[t," "]})})]})},re=function(e){var t=e.children,n=e.navControl,a=e.mobile,r=Object(j.f)(),c=Object(i.a)(n,2),s=c[0],o=c[1],l=x(),u=function(e){return{mobileSx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:e}},permanentSx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:e}}}}(l.drawerWidth),d=u.mobileSx,b=u.permanentSx,h=function(){o(!s)};return"/"===r.pathname?null:Object(B.jsx)(W.a,{sx:l.drawer,"aria-label":"search",children:Object(B.jsxs)(Y.a,{variant:a?"temporary":"permanent",open:!a||s,onClose:a?h:null,ModalProps:{keepMounted:!0},sx:a?d:b,children:[Object(B.jsx)(z.a,{}),Object(B.jsx)(D.a,{}),Object(B.jsx)(ae,{children:t,mobileClose:a?h:null})]})})},ce=n(229),ie=n(233),se=n(255),oe=n(256),le=n(119),ue=n.n(le),de=n(118),je=n.n(de),be=n(116),he=n.n(be),Oe=n(117),pe=n.n(Oe),fe=n(121),xe=n.n(fe),me=n(120),ve=n.n(me),ge=[{value:"20169",label:"'16 Fall - '17 Winter",short_label:"'16-'17 FW"},{value:"20175",label:"'17 Summer",short_label:"'17 S"},{value:"20179",label:"'17 Fall - '18 Winter",short_label:"'17-'18 FW"},{value:"20185",label:"'18 Summer",short_label:"'18 S"},{value:"20189",label:"'18 Fall - '19 Winter",short_label:"'18-'19 FW"},{value:"20195",label:"'19 Summer",short_label:"'19 S"},{value:"20199",label:"'19 Fall - '20 Winter",short_label:"'19-'20 FW"},{value:"20205",label:"'20 Summer",short_label:"'20 S"},{value:"20209",label:"'20 Fall - '21 Winter",short_label:"'20-'21 FW"},{value:"20215",label:"'21 Summer",short_label:"'21 S"},{value:"20219",label:"'21 Fall - '22 Winter",short_label:"'21-'22 FW"}],ye=["20169","20175","20179","20185","20189","20195","20199","20205","20209","20215","20219"].flatMap((function(e){return[{session:e,section:"f"},{session:e,section:"s"},{session:e,section:"y"}]})),Ce=("ABP/ACT/AFR/AMS/ANA/ANT/APM/ARC/ARH/AST/BCB/BCH/BIO/BMS/BPM/CAR/CAS/CDN/CHC/CHM/CIN/CJH/CJS/CLA/CLT/COG/COL/CRE/CRI/CSB/CSC/CSE/CTA/DHU/DRM/DTS/EAS/ECE/ECO/EDS/EDU/EEB/EHJ/ELL/ENG/ENT/ENV/ESS/EST/ETH/EUR/FAH/FCS/FIN/FOR/FRE/FSL/GER/GGR/GRK/HAJ/HIS/HMB/HPS/HST/HUN/IFP/IMC/IMM/INI/INS/IRE/ITA/IVP/JAH/JAL/JAR/JCA/JCC/JCI/JDC/JEE/JEG/JEH/JEI/JFE/JFG/JFL/JFP/JFV/JGA/JGE/JGI/JGJ/JGU/JHA/JHE/JHN/JHP/JIA/JIG/JLN/JLP/JLS/JMB/JNH/JNR/JNS/JOP/JPA/JPD/JPE/JPF/JPH/JPI/JPM/JPP/JPR/JPS/JPU/JQR/JRA/JSC/JSH/JSR/JSU/JSV/JUG/JUM/JWE/LAS/LAT/LCT/LIN/LMP/MAT/MCS/MGR/MGT/MGY/MHB/MIJ/MST/MUN/MUS/NEW/NFS/NMC/NML/NUS/PCJ/PCL/PHC/PHL/PHS/PHY/PLN/POL/PPG/PRT/PSL/PSY/REN/RLG/RSM/SAS/SDS/SLA/SMC/SOC/SPA/STA/SWE/SWK/TRN/UNI/URB/USA/UTP/VIC/WDW/WGS/WRR".split("/"),function(e){return A.a.isEmpty(e)?null:"".concat(e.code,"-").concat(e.section,"-").concat(e.session)}),Se=n(51),ke=function(){return C.a.create({baseURL:"https://ionice.herokuapp.com/https://timetable.iit.artsci.utoronto.ca/api/",headers:{}})},we=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,c,s,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.a)(t,3),r=a[0],c=a[1],s=a[2],o="".concat(s,"-").concat(c,"-").concat(r),l=new Date,e.next=5,ke().get("".concat(r,"/courses/"),{params:{code:s,section:c}}).then((function(e){n(e.data[o]?Object(Se.a)(Object(Se.a)({},e.data[o]),{},{updated:l}):{})})).catch((function(){n({})}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(e){var t=e.children,n=Object(ce.a)({disableHysteresis:!0,threshold:0});return Object(a.cloneElement)(t,{elevation:n?4:0})},De=function(e){var t=e.title,n=e.expandNav,r=e.setExpandNav,c=e.dark,s=e.setDark,o=e.currDisplayedData,l=e.setCurrDisplayedData,u=e.favorites,d=e.dispatchFavorites,b=e.mobile,h=Object.keys(u).includes(Ce(o)),O=Object(a.useState)(h),p=Object(i.a)(O,2),f=p[0],m=p[1],v=Object(j.f)();Object(a.useEffect)((function(){m(h)}),[t,h]);var g=function(){r(!n)},y=function(){d({type:f?"remove":"add",courseId:Ce(o),payload:o})},C=x(),S=function(){return Object(B.jsx)(ie.a,{title:"Toggle theme",children:Object(B.jsx)(se.a,{color:"inherit","aria-label":"toggle theme",onClick:function(){return s(!c)},children:c?Object(B.jsx)(he.a,{}):Object(B.jsx)(pe.a,{})})})},k=function(){return t?Object(B.jsx)(ie.a,{title:"".concat(f?"Remove from":"Add to"," bookmarks"),children:Object(B.jsx)(se.a,{color:"inherit",onClick:y,children:f?Object(B.jsx)(je.a,{}):Object(B.jsx)(ue.a,{})})}):null},E=function(){var e=Object(a.useState)(!1),n=Object(i.a)(e,2),r=n[0],c=n[1];Object(a.useEffect)((function(){var e=!0;if(r){var t=o.session,n=o.section,a=o.code;we([t,n,a],l).then((function(){e&&c(!1)}))}return function(){e=!1}}),[r]);return!t||A.a.isEmpty(o)?null:r?Object(B.jsx)(se.a,{color:"inherit",disabled:!0,children:Object(B.jsx)(L.a,{size:24,color:"inherit"})}):Object(B.jsx)(ie.a,{title:"Refresh course",children:Object(B.jsx)(se.a,{color:"inherit",onClick:function(){c(!0)},children:Object(B.jsx)(ve.a,{})})})},D=function(){return b&&"/"!==v.pathname?Object(B.jsx)(se.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:g,sx:C.menuButton,children:Object(B.jsx)(xe.a,{})}):null},J=function(){return Object(B.jsx)(w.a,{variant:"h6",sx:C.flex,children:t})};return Object(B.jsx)(Ee,{children:Object(B.jsx)(oe.a,{position:"fixed",sx:C.appBar,children:Object(B.jsxs)(z.a,{children:[Object(B.jsx)(D,{}),Object(B.jsx)(J,{}),Object(B.jsx)(E,{}),Object(B.jsx)(k,{}),Object(B.jsx)(S,{})]})})})},Je=n(260),Fe=n(239),Te=function(e){var t=e.subheader;return Object(B.jsx)(w.a,{variant:"h5",paragraph:!0,children:t})},Pe=function(e){var t=e.title,n=e.retrievedOn;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(w.a,{variant:"h4",children:t}),Object(B.jsx)(w.a,{variant:"body2",children:"Retrieved on ".concat(n)})]})},Ie=function(e){var t=e.description;return t?Object(B.jsx)(w.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}}):null},Ne=function(e){var t=e.prerequisite;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Pre-requisites: ".concat(t)}):null},Re=function(e){var t=e.corequisite;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Co-requisites: ".concat(t)}):null},Me=function(e){var t=e.exclusion;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Exclusions: ".concat(t)}):null},Ae=function(e){var t=e.recommendedPreparation;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Recommended preparation: ".concat(t)}):null},We=function(e){var t=e.breadthCategories;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Breadth categories: ".concat(t)}):null},Le=function(e){var t=e.distributionCategories;return t?Object(B.jsx)(w.a,{variant:"body1",children:"Distribution categories: ".concat(t)}):null},Be=function(e){var t=e.webTimetableInstructions;return t?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(w.a,{variant:"body1",children:"Timetable instructions:"}),Object(B.jsx)(w.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}})]}):null},He=function(e){var t=e.deliveryInstructions;return t?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(w.a,{variant:"body1",children:"Delivery instructions:"}),Object(B.jsx)(w.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}})]}):null},Ge=function(e){var t=e.prerequisite,n=e.corequisite,a=e.exclusion,r=e.recommendedPreparation;return t||n||a||r?Object(B.jsxs)(S.a,{spacing:1,children:[Object(B.jsx)(Te,{subheader:"Enrollment limitations"}),Object(B.jsx)(Ne,{prerequisite:t}),Object(B.jsx)(Re,{corequisite:n}),Object(B.jsx)(Me,{exclusion:a}),Object(B.jsx)(Ae,{recommendedPreparation:r})]}):null},Ue=function(e){var t=e.breadthCategories,n=e.distributionCategories;return t||n?Object(B.jsxs)(S.a,{spacing:1,children:[Object(B.jsx)(Te,{subheader:"Breadth classifications"}),Object(B.jsx)(We,{breadthCategories:t}),Object(B.jsx)(Le,{distributionCategories:n})]}):null},_e=function(e){var t=e.webTimetableInstructions,n=e.deliveryInstructions;return t||n?Object(B.jsxs)(S.a,{spacing:1,children:[Object(B.jsx)(Te,{subheader:"Additional instructions"}),Object(B.jsx)(Be,{webTimetableInstructions:t}),Object(B.jsx)(He,{deliveryInstructions:n})]}):null},qe=n(250),Qe=n(257),Ve=n(258),Ye=n(259),ze=n(91),Ke=n.n(ze),Xe=n(123),Ze=n.n(Xe),$e=n(122),et=n.n($e),tt=function(e){if(A.a.isEmpty(e))return"TBA";var t="";return Object.entries(e).forEach((function(e){var n=Object(i.a)(e,2)[1],a=n.lastName,r=n.firstName;t+=r+". "+a+", "})),t.substring(0,t.length-2)},nt=function(e,t){var n=e.meetingDay,a=e.meetingStartTime,r=e.meetingEndTime,c=e.assignedRoom1,i=e.assignedRoom2,s=function(e,t){switch(e){case"MO":return t?"Mon":"M";case"TU":return t?"Tue":"T";case"WE":return t?"Wed":"W";case"TH":return t?"Thu":"R";case"FR":return t?"Fri":"F";default:return null}}(n,t),o=t?a+" \u2013 "+r:a.replace(":","")+"\u2013"+r.replace(":","");if(!t)return s+" "+o;var l=function(e,t){return e||t?e&&t?e===t?e:e+"/"+t:e||t:"TBA"}(c,i);return s+" "+o+" "+(t?"at ":"")+l},at=function(e,t,n,a,r){var c=Number(e)-Number(t);return r?c>0?"Remaining capacity: ".concat(c+" out of "+e):a?"Waitlist: ".concat(n," (capacity: ").concat(e,")"):"Full, no waitlisting. (capacity: ".concat(e,")"):c>0?"Available: "+c:a?"Waitlist: "+n:"Full, no waitlisting"},rt=function(e,t){switch(e){case"CLASS":return"In person";case"ONLSYNC":return t?"Online \u2014 Synchronous":"Online Sync";case"ONLASYNC":return t?"Online \u2014 Asynchronous":"Online Async";default:return null}},ct=function(e){switch(e){case"P":return"Priority: Some students are given priority access until a specific date.";case"E":return"Enrol at Department: Students must contact the sponsoring Department to enrol.";case"AE":return"Department Approval Required: Students must request enrolment on ACORN and await Departmental review of their request.";case"PE":return"Priority, then Enrol at Department: Some students are given priority access until a specific date, after which time another group of students is also able to enrol by contacting the sponsoring Department.";case"R1":return"Restricted: Course/section is restricted at all times for specific students.";case"R2":return"Restricted: Course/section is restricted to a group of students until a specific date, after which time another group of students is also able to enrol.";default:return""}},it=function(e){if(!e)return null;var t=e.toString().split(" ");return"".concat(t[1]," ").concat(t[2]," ").concat(t[3]," ").concat(t[4]," ").concat(t[6]," ").concat(t[7]," ").concat(t[8])},st=function(e,t){var n=e.substring(4);t=t.toLowerCase();var a,r="9"===n&&"f"===t||"5"===n?e.substring(2,4):Number(e.substring(2,4))+1;return"9"===n?a="f"===t?"Fall":"s"===t?"Winter":"Year-long":(a="Summer ",a+="f"===t?"(1st half)":"s"===t?"(2nd half)":"(full session)"),"'".concat(r," ").concat(a)},ot=function(e){var t=e.meeting,n=e.onClick,a=e.timetable,r=e.dispatchTimetable,c=e.session,l=e.section,u=e.code,d=t.schedule,j=t.instructors,b=t.teachingMethod,h=t.sectionNumber,O=t.enrollmentCapacity,p=t.actualEnrolment,f=t.actualWaitlist,x=t.waitlist,m=t.deliveryMode,v=t.enrollmentIndicator,g=t.enrollmentControls,y=t.cancel,C=function(){var e=Object(s.a)(),t=Object(o.a)(e.breakpoints.down("sm"))?"caption":"body2";if(y)return Object(B.jsx)(w.a,{variant:t,children:"Cancelled"});var n=!1;return Object(B.jsxs)(S.a,{spacing:1,direction:"row",divider:Object(B.jsx)(D.a,{orientation:"vertical",flexItem:!0}),children:[Object(B.jsx)(w.a,{variant:t,children:at(O,p,f,x,n)}),Object(B.jsx)(w.a,{variant:t,children:rt(m,n)}),function(n){return Object(o.a)(e.breakpoints.down("sm"))?null:Object(B.jsx)(w.a,{variant:t,display:{xs:"none",sm:"block"},children:tt(n)})}(j),Object.entries(d).map((function(e){var a=Object(i.a)(e,2),r=a[0],c=a[1];return"-"===r?null:Object(B.jsx)(w.a,{variant:t,children:nt(c,n)},r)})),function(n){return Object(o.a)(e.breakpoints.down("sm"))||!n?null:Object(B.jsx)(w.a,{variant:t,children:n})}(v)]})},k="".concat(b+h);l=l.toUpperCase(),u=u.toUpperCase();var E=function(){return!!(Object.keys(a).includes(c)&&Object.keys(a[c]).includes("".concat(u).concat(l))&&Object.keys(a[c]["".concat(u).concat(l)]).includes(b))&&a[c]["".concat(u).concat(l)][b].sectionNumber===h};return Object(B.jsxs)(T.a,{disableGutters:!0,children:[Object(B.jsx)(q.a,{onClick:function(){n(function(){var e=!0;return{section:k,instructors:tt(j),meetings:Object.entries(d).filter((function(e){return"-"!==Object(i.a)(e,1)[0]})).map((function(t){var n=Object(i.a)(t,2)[1];return nt(n,e)})),delivery:rt(m,e),priority:ct(v),capacity:at(O,p,f,x,e),priorityGroups:g.map((function(e){return function(e){var t=e.postCode,n=e.postName,a=e.restrictedGroup,r=a?"Group ".concat(a," \u2014 "):"";if(t&&n)return r+t+" "+n;var c=e.yearOfStudy,i=e.primaryOrgName,s=e.secondaryOrgName,o=e.assocOrgName,l=e.adminOrgName||s||"";return r+(i?i+": ":"")+(c&&"*"!==c?"Year ".concat(c," "):"")+(l||o||"")}(e)}))}}())},disabled:Boolean(y),children:Object(B.jsxs)(S.a,{children:[Object(B.jsx)(P.a,{primary:k}),Object(B.jsx)(C,{})]})}),Object(B.jsx)(qe.a,{children:y?Object(B.jsx)(se.a,{disabled:!0,children:Object(B.jsx)(Ke.a,{})}):Object(B.jsx)(ie.a,{placement:"left",title:"".concat(E()?"Remove from":"Add to"," timetable"),children:Object(B.jsx)(se.a,{onClick:function(){return r({type:E()?"remove":"add",payload:{session:c,code:u,section:l,meeting:t}})},children:E()?Object(B.jsx)(et.a,{}):Object(B.jsx)(Ke.a,{})})})})]})},lt=function(e){var t=e.data,n=e.onListEntryClick,a=e.timetable,r=e.dispatchTimetable,c=e.section,s=e.session,o=e.code;return Object(B.jsx)(F.a,{dense:!0,children:Object.entries(t).map((function(e){var t=Object(i.a)(e,2),l=t[0],u=t[1];return Object(B.jsx)(ot,{meeting:u,onClick:n,timetable:a,dispatchTimetable:r,section:c,session:s,code:o},l)}))})},ut=function(e){var t=e.data,n=t.instructors,r=t.meetings,c=t.delivery,s=t.priority,o=t.capacity,l=t.priorityGroups,u=Object(a.useState)(!1),d=Object(i.a)(u,2),j=d[0],b=d[1];return Object(B.jsx)(Qe.a,{children:Object(B.jsxs)(S.a,{spacing:2,divider:Object(B.jsx)(D.a,{}),children:[Object(B.jsx)(w.a,{variant:"body1",children:"Instructors: ".concat(n)}),Object(B.jsx)(w.a,{variant:"body1",children:"Delivery mode: ".concat(c)}),Object(B.jsx)(w.a,{variant:"body1",children:o}),Object(B.jsxs)(S.a,{children:[Object(B.jsx)(w.a,{variant:"body1",paragraph:!0,children:"Meetings:"}),r.map((function(e){return Object(B.jsx)(w.a,{variant:"body2",children:e},e)}))]}),s?Object(B.jsxs)(S.a,{children:[Object(B.jsx)(w.a,{variant:"body1",paragraph:!0,children:"Enrollment priority:"}),Object(B.jsx)(w.a,{variant:"body2",children:s})]}):null,A.a.isEmpty(l)?null:Object(B.jsxs)(S.a,{children:[Object(B.jsxs)(S.a,{direction:"row",spacing:1,alignItems:"center",paddingBottom:1,children:[Object(B.jsx)(w.a,{variant:"body1",children:"Priority student groups:"}),Object(B.jsx)(se.a,{onClick:function(){return b(!j)},children:Object(B.jsx)(Ze.a,{sx:{transform:j?"rotate(-180deg)":"rotate(0)",transition:"0.2s"}})})]}),Object(B.jsx)(S.a,{sx:{display:j?"block":"none"},children:l.map((function(e,t){return Object(B.jsx)(w.a,{variant:"body2",children:e},t)}))})]})]})})},dt=function(e){var t=e.data,n=e.timetable,r=e.dispatchTimetable,c=e.section,s=e.session,o=e.code,l=Object(a.useState)(!1),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)({section:"",instructors:"",meetings:[],delivery:"",priority:"",capacity:"",priorityGroups:[]}),h=Object(i.a)(b,2),O=h[0],p=h[1];if(!t)return null;return Object(B.jsxs)(S.a,{children:[Object(B.jsx)(w.a,{variant:"h5",paragraph:!0,children:"Meeting sections"}),Object(B.jsx)(lt,{data:t,onListEntryClick:function(e){j(!0),p(e)},timetable:n,dispatchTimetable:r,section:c,session:s,code:o}),Object(B.jsxs)(Ve.a,{open:d,onClose:function(){return j(!1)},maxWidth:"sm",fullWidth:!0,children:[Object(B.jsx)(Ye.a,{children:O.section}),Object(B.jsx)(ut,{data:O})]})]})},jt=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r,c,s,o,l=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,a=ke(),r=n?ye.filter((function(e){var t=e.session,a=e.section;return!(t>n.session)&&!(t===n.session&&a>=n.section)})):ye,c=n?n.session+n.section:"",s={},o=r.map((function(e){var n=e.session;return a.get("".concat(n,"/courses/"),{params:{code:t}})})),e.abrupt("return",Promise.all(o).then((function(e){return e.forEach((function(e){Array.isArray(e.data)||Object.entries(e.data).forEach((function(e){var t=Object(i.a)(e,2)[1],n=t.session,a=t.section;s.hasOwnProperty(n+a)||n+a===c||(s[n+a]=t)}))})),s})).catch((function(e){return console.log(e),{}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bt=function(e){var t=e.courseCode,n=e.currSection,r=e.currSession,c=e.mobile,s=Object(a.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)({}),j=Object(i.a)(d,2),b=j[0],h=j[1],O=Object(a.useRef)(!0);return Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(t,{session:r,section:n});case 2:a=e.sent,O.current&&h(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O.current=!0,u(!0),e().then((function(){O.current&&u(!1)})),function(){O.current=!1}}),[t,r,n]),Object(B.jsxs)(S.a,{divider:c?null:Object(B.jsx)(D.a,{}),spacing:c?0:2,children:[Object(B.jsx)(w.a,{variant:"h5",paragraph:c,children:"Past offerings"}),Object(B.jsx)(ht,{data:b,loading:l,mobile:c})]})},ht=function(e){var t=e.data,n=e.loading,a=e.mobile;return window.navigator.onLine?n?Object(B.jsx)(H,{}):!t||A.a.isEmpty(t)?Object(B.jsx)(w.a,{variant:"body2",children:"This course code has no past offerings."}):Object(B.jsx)(F.a,{dense:!a,children:Object.entries(t).reverse().map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(B.jsx)(Ot,{data:a},n)}))}):Object(B.jsx)(w.a,{variant:"body2",children:"Past offerings data is not available when offline."})},Ot=function(e){var t=e.data,n=t.session,a=t.code,r=t.section,c=function(e){var t=Object.entries(e).filter((function(e){return"LEC"===Object(i.a)(e,2)[1].teachingMethod})),n=new Set,a=[],r=0;return t.forEach((function(e){var t=Object(i.a)(e,2)[1];Object.entries(t.instructors).forEach((function(e){var t=Object(i.a)(e,2)[1],r="".concat(t.firstName,". ").concat(t.lastName);n.has(r)||(a.push(r),n.add(r))})),!t.cancel&&Number(t.enrollmentCapacity>0)&&(r+=Number(t.actualEnrolment)/Number(t.enrollmentCapacity))})),[a.sort((function(e,t){return e.split(" ")[1]>t.split(" ")[1]?1:-1})).join(", "),0!==t.length?r/t.length:0]}(t.meetings),s=Object(i.a)(c,2),o=s[0],l=s[1],u=l?Math.round(100*l):0;return Object(B.jsx)(T.a,{disableGutters:!0,children:Object(B.jsx)(q.a,{component:R.b,to:"/course/".concat(n,"/").concat(r.toLowerCase(),"/").concat(a.toLowerCase()),children:Object(B.jsxs)(S.a,{children:[Object(B.jsx)(P.a,{primary:st(n,r)}),Object(B.jsxs)(S.a,{direction:"row",divider:Object(B.jsx)(D.a,{orientation:"vertical",flexItem:!0}),spacing:1,children:[Object(B.jsx)(w.a,{variant:"caption",children:"Occupancy: ".concat(u,"%")}),Object(B.jsx)(w.a,{variant:"caption",children:o})]})]})})})},pt=function(e){var t=e.currDisplayedData,n=e.setCurrDisplayedData,r=e.currFetchedData,c=e.favorites,l=e.timetable,u=e.dispatchTimetable,d=Object(j.f)(),b=Object(a.useState)(!0),h=Object(i.a)(b,2),O=h[0],p=h[1],f=Object(a.useRef)(!0),x=Object(s.a)(),m=Object(o.a)(x.breakpoints.down("lg"));if(Object(a.useEffect)((function(){f.current=window.navigator.onLine;var e=ft(d.pathname);if(3!==e.length)n({}),p(!1);else{var t=Object(i.a)(e,3),a=t[0],s=t[1],o=t[2],l="".concat(o,"-").concat(s,"-").concat(a);r.hasOwnProperty(l)?(n(r[l]),p(!1)):f.current?we(e,n).then((function(){return p(!1)})):(c.hasOwnProperty(l)?n(c[l]):n({}),p(!1))}return function(){n({}),p(!0)}}),[d,n]),O)return Object(B.jsx)(H,{});if(!f.current&&A.a.isEmpty(t))return Object(B.jsx)(w.a,{children:"You are currently offline. Please try again later."});if(0===Object.keys(t).length)return Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsx)(W.a,{display:"flex",justifyContent:"center",children:Object(B.jsx)(w.a,{variant:"h4",children:"Invalid URL. Perhaps you visited a broken link?"})})});var v=t.code,g=t.section,y=t.session,C=t.courseTitle,k=t.courseDescription,E=t.prerequisite,J=t.corequisite,F=t.exclusion,T=t.recommendedPreparation,P=t.breadthCategories,I=t.distributionCategories,N=t.webTimetableInstructions,R=t.deliveryInstructions,M=t.meetings,L=t.updated;return Object(B.jsxs)(Fe.a,{container:!0,children:[Object(B.jsx)(Fe.a,{item:!0,xs:12,lg:9,children:Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsxs)(S.a,{spacing:3,divider:Object(B.jsx)(D.a,{}),children:[Object(B.jsx)(Pe,{title:C,retrievedOn:it(L)}),Ie({description:k}),Ge({prerequisite:E,corequisite:J,exclusion:F,recommendedPreparation:T}),Ue({breadthCategories:P,distributionCategories:I}),_e({webTimetableInstructions:N,deliveryInstructions:R}),Object(B.jsx)(dt,{data:M,timetable:l,dispatchTimetable:u,section:g,session:y,code:v}),m?Object(B.jsx)(bt,{courseCode:v,currSection:g,currSession:y,mobile:!0}):null]})})}),m?null:Object(B.jsx)(Fe.a,{item:!0,xs:12,lg:3,children:Object(B.jsx)(Je.a,{maxWidth:"sm",children:Object(B.jsx)(bt,{courseCode:v,currSection:g,currSession:y,mobile:!1})})})]})},ft=function(e){return e.replace("/course","").toUpperCase().split("/").filter((function(e){return e}))},xt=n(124),mt=n.n(xt),vt=function(){return Object(B.jsx)(w.a,{variant:"h4",children:"Bookmarked Courses"})},gt=function(e){var t=e.favorites,n=e.dispatchFavorites;if(Object.keys(t).length<1)return Object(B.jsx)(W.a,{display:"flex",justifyContent:"center",children:Object(B.jsx)(w.a,{variant:"body2",children:"You don't have any bookmarked courses yet. To bookmark a course, click the add bookmark button on the top-right corner when you're at a course page."})});var a=function(e){var t=e.entry,a=t.courseTitle,r=t.code,c=t.section,i=t.session;return Object(B.jsxs)(T.a,{disableGutters:!0,children:[Object(B.jsx)(q.a,{component:R.b,to:"/course/".concat(i,"/").concat(c.toLowerCase(),"/").concat(r.toLowerCase()),children:Object(B.jsx)(P.a,{primary:"".concat(a),secondary:"".concat(r).concat(c)})}),Object(B.jsx)(qe.a,{children:Object(B.jsx)(se.a,{onClick:function(){return n({type:"remove",courseId:"".concat(r,"-").concat(c,"-").concat(i)})},children:Object(B.jsx)(mt.a,{})})})]})};return Object(B.jsx)(F.a,{dense:!0,children:Object.entries(t).sort((function(e,t){return e<t?-1:1})).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(B.jsx)(a,{entry:r},n)}))})},yt=function(e){var t=e.favorites,n=e.dispatchFavorites;return Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsxs)(S.a,{spacing:3,divider:Object(B.jsx)(D.a,{}),children:[Object(B.jsx)(vt,{}),Object(B.jsx)(gt,{favorites:t,dispatchFavorites:n})]})})},Ct=function(e){var t=e.timetable,n=(e.dispatchTimetable,Object(a.useState)(A.a.last(Object.keys(t)))),r=Object(i.a)(n,2);r[0],r[1];console.log(t);Object.keys(t);return Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsx)(w.a,{variant:"h4",children:"Work in progress, check back soon."})})},St=function(){return Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsxs)(Fe.a,{container:!0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"100vh",children:[Object(B.jsx)(Fe.a,{item:!0,paddingBottom:2,marginRight:"-40px",children:Object(B.jsx)(w.a,{variant:"h3",sx:{fontWeight:100,letterSpacing:"40px",fontFamily:"Roboto"},children:"Boreal".toUpperCase()})}),Object(B.jsx)(Fe.a,{item:!0,paddingBottom:2,children:Object(B.jsx)(w.a,{variant:"body1",sx:{fontFamily:"Quicksand"},children:"Course finder for UofT Arts & Science, reimagined."})}),Object(B.jsx)(Fe.a,{item:!0,children:Object(B.jsx)(E.a,{variant:"outlined",component:R.b,to:"/search",children:"Search Courses"})})]})})},kt=function(e){var t=e.currFetchedData,n=e.setCurrFetchedData;return Object(B.jsx)(Je.a,{maxWidth:"lg",children:Object(B.jsxs)(S.a,{spacing:3,divider:Object(B.jsx)(D.a,{}),children:[Object(B.jsx)(w.a,{variant:"h4",children:"Search"}),Object(B.jsx)(wt,{setCurrFetchedData:n}),Object(B.jsx)(Et,{currFetchedData:t})]})})},wt=function(e){e.setCurrFetchedData;return Object(B.jsx)(Fe.a,{container:!0,children:Object(B.jsx)(Fe.a,{item:!0,xs:12,children:Object(B.jsx)(w.a,{variant:"h5",children:"WIP, use the side search panel for now."})})})},Et=function(e){e.currFetchedData;return Object(B.jsx)(F.a,{dense:!0,children:Object(B.jsx)("div",{})})},Dt=function(e){var t=e.favorites,n=e.dispatchFavorites,a=e.currFetchedData,r=e.setCurrFetchedData,c=e.currDisplayedData,i=e.setCurrDisplayedData,s=e.timetable,o=e.dispatchTimetable,l=e.sv;return Object(B.jsxs)(j.c,{children:[Object(B.jsx)(j.a,{path:"/",exact:!0,children:Object(B.jsx)(St,{})}),Object(B.jsxs)(W.a,{sx:l,children:[Object(B.jsx)(z.a,{}),Object(B.jsx)(j.a,{path:"/course",children:Object(B.jsx)(pt,{currDisplayedData:c,setCurrDisplayedData:i,currFetchedData:a,favorites:t,timetable:s,dispatchTimetable:o})}),Object(B.jsx)(j.a,{path:"/bookmarks",children:Object(B.jsx)(yt,{favorites:t,dispatchFavorites:n})}),Object(B.jsx)(j.a,{path:"/timetable",children:Object(B.jsx)(Ct,{timetable:s,dispatchTimetable:o})}),Object(B.jsx)(j.a,{path:"/search",children:Object(B.jsx)(kt,{currFetchedData:a,setCurrFetchedData:r})})]})]})},Jt=n(4),Ft="dfsoudfhsud",Tt="asfoahfisd",Pt=function(e,t){if("reset"===t.type)return localStorage.setItem(Tt,JSON.stringify(t.payload)),t.payload;var n=t.payload,a=n.session,r=n.code,c=n.section,i=n.meeting,s=i.teachingMethod,o=Object(Se.a)({},e);switch(r=r.toUpperCase(),c=c.toUpperCase(),t.type){case"add":Object.keys(o).includes(a)||(o[a]={}),Object.keys(o[a]).includes("".concat(r).concat(c))||(o[a]["".concat(r).concat(c)]={}),o[a]["".concat(r).concat(c)][s]=i;break;case"remove":Object.keys(o).includes(a)&&Object.keys(o[a]).includes("".concat(r).concat(c))&&Object.keys(o[a]["".concat(r).concat(c)]).includes(s)&&delete o[a]["".concat(r).concat(c)][s];break;default:throw new Error("Called timetableReducer with unknown action type ".concat(t.type))}return localStorage.setItem(Tt,JSON.stringify(o)),o},It=function(e,t){var n,a=t.type,r=t.payload,c=t.courseId;if(!c&&"reset"!==a)throw new Error("Called favoritesReducer while course ID is invalid.");switch(a){case"add":n=Object(Se.a)(Object(Se.a)({},e),{},Object(Jt.a)({},c,r));break;case"remove":n=A.a.omit(e,c);break;case"reset":n=r;break;default:throw new Error("Called favoritesReducer with invalid action.type: ".concat(a))}return localStorage.setItem(Ft,JSON.stringify(n)),n},Nt=function(){var e=x(),t=Object(s.a)(),n=Object(o.a)(t.breakpoints.down("md")),r=Object(j.f)(),c=Object(a.useState)("dark"===localStorage.getItem("darkMode")),m=Object(i.a)(c,2),v=m[0],g=m[1],y=Object(a.useState)(!1),C=Object(i.a)(y,2),S=C[0],k=C[1],w=Object(a.useState)(""),E=Object(i.a)(w,2),D=E[0],J=E[1],F=Object(a.useState)({}),T=Object(i.a)(F,2),P=T[0],I=T[1],N=Object(a.useState)({}),R=Object(i.a)(N,2),M=R[0],W=R[1],L=Object(a.useReducer)(It,function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}}(Ft)),H=Object(i.a)(L,2),U=H[0],_=H[1],q=Object(a.useReducer)(Pt,function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}}(Tt)),Q=Object(i.a)(q,2),V=Q[0],Y=Q[1];Object(a.useEffect)((function(){var e=function(e){"darkMode"===e.key?g("dark"===e.newValue):e.key===Ft?_({type:"reset",payload:JSON.parse(e.newValue)}):e.key===Tt&&Y({type:"reset",payload:JSON.parse(e.newValue)})};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(a.useEffect)((function(){var e=function(e,t,n){if("/search"===e)return"Search";if("/favorites"===e)return"Favorites";if("/timetable"===e)return"Timetable";if("/settings"===e)return"Settings";if(e.startsWith("/course")){if(A.a.isEmpty(t))return"";if(t.session!==A.a.last(ge).value){var a=ge.filter((function(e){return e.value===t.session}));return"".concat(t.code).concat(t.section," (").concat(n?"":"Session: ").concat(A.a.isEmpty(a)?t.session:a[0].short_label,")")}return"".concat(t.code).concat(t.section)}return"Boreal"}(r.pathname,P,n);J(r.pathname.startsWith("/course")?e:""),document.title="".concat("Boreal"===e?e:e+" \u2014 Boreal")}),[r,P,n]),Object(a.useEffect)((function(){localStorage.setItem("darkMode",v?"dark":"light")}),[v]);var z;return Object(B.jsx)(l.a,{injectFirst:!0,children:Object(B.jsxs)(u.a,{theme:(z=v,Object(b.a)(Object(h.a)({palette:{mode:z?"dark":"light",primary:{main:O.a[800]},secondary:{main:p.a[50]},error:{main:f.a[500]}},typography:{fontFamily:["Roboto","Quicksand"].join(",")},components:{MuiTypography:{defaultProps:{variantMapping:{h4:"h1",h5:"h2",h6:"h3"}},styleOverrides:{h3:{fontFamily:"Quicksand",fontWeight:300},h4:{fontFamily:"Quicksand",fontWeight:300},h5:{fontFamily:"Quicksand",fontWeight:400},h6:{fontFamily:"Quicksand",fontWeight:400}}}}}))),children:[Object(B.jsx)(d.a,{}),Object(B.jsx)(De,{title:D,expandNav:S,setExpandNav:k,dark:v,setDark:g,currDisplayedData:P,setCurrDisplayedData:I,favorites:U,dispatchFavorites:_,mobile:n}),Object(B.jsx)(re,{mobile:n,navControl:[S,k],children:Object(B.jsx)(G,{fetchedData:M,setFetchedData:W,onCourseSelection:function(){k(!1)},onButtonClick:function(){return k(!S)}})}),Object(B.jsx)(Dt,{favorites:U,dispatchFavorites:_,timetable:V,dispatchTimetable:Y,currFetchedData:M,setCurrFetchedData:W,currDisplayedData:P,setCurrDisplayedData:I,sv:n?e.contentMobileWrapper:e.contentWrapper})]})})};c.a.render(Object(B.jsx)(R.a,{children:Object(B.jsx)(Nt,{})}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.d0bb5593.chunk.js.map