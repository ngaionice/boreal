(this.webpackJsonpboreal=this.webpackJsonpboreal||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(48),c=n.n(a),i=n(4),o=n(57),s=n(7),l=n(20),u=n(228),j=n(229),b=n(238),d=n(230),O=n(252),h=n(240),f=n(17),p=n(22),x=n.n(p),m=n(239),v=n(123),g=n(50),C=n(108),y=n(51),S=function(){var e=360;return{flex:{flex:1},paginator:{justifyContent:"center",padding:"4px"},drawerWidth:e,drawer:{width:{md:e},flexShrink:{md:0}},appBar:{width:{md:"calc(100% - ".concat(e,"px)")},ml:{md:"".concat(e,"px")}},menuButton:{marginRight:2,display:{md:"none"}},tabs:{height:"48px"},drawerPaper:{width:e},content:{flexGrow:1,padding:3},contentWrapper:{flexGrow:1,paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5,marginLeft:"".concat(e,"px")},contentMobileWrapper:{flexGrow:1,paddingLeft:3,paddingRight:3,paddingTop:5,paddingBottom:5},loader:{padding:3},gridItem:{height:"100%"}}},k=n(42),w=n.n(k),E=n(55),J=n(74),P=n.n(J),I=n(220),M=n(232),T=n(244),N=n(245),R=n(246),A=n(233),L=n(243),F=n(247),W=n(249),D=n(110),B=n.n(D),H=n(27),G=n(241),U=n(0),_=function(){var e=S();return Object(U.jsx)(h.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:e.loader,children:Object(U.jsx)(G.a,{})})},q=function(e){var t=e.fetchedDataControl,n=e.onCourseSelection,a=e.onButtonClick,c=Object(r.useState)(""),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useRef)(0),j=Object(s.a)(t,2),b=j[0],d=j[1],O=Object(r.useState)(!1),h=Object(s.a)(O,2),f=h[0],p=h[1],x=Object(r.useRef)(new Date),m=Object(r.useState)(1),v=Object(s.a)(m,2),g=v[0],C=v[1],y=Object(r.useState)(Math.ceil(Object.keys(b).length/10)),S=Object(s.a)(y,2),k=S[0],J=S[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(E.a)(w.a.mark((function e(t){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://ionice.herokuapp.com/https://timetable.iit.artsci.utoronto.ca/api/20219/courses?code=".concat(o),x.current=new Date,e.next=4,P.a.get(n,{headers:{}});case 4:r=e.sent,a=r.data,u.current===t&&(Object.keys(a).forEach((function(e){a[e].updated=x.current})),d(a),J(Math.ceil(Object.keys(a).length/10)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){u.current+=1,p(!0),C(1),e(u.current).then((function(){return p(!1)}))};if(!o||b){var n=setTimeout((function(){o&&t()}),500);return function(){clearTimeout(n)}}t()}),[o]),Object(U.jsxs)(I.a,{flex:1,spacing:1,children:[Object(U.jsx)(V,{searchTermControl:[o,l],onButtonClick:a}),Object(U.jsx)(Y,{loading:f,data:b,onCourseClick:function(){n()},pageControl:[g,C],noOfPages:k,itemsPerPage:10})]})},V=function(e){var t=e.searchTermControl,n=e.onButtonClick,r=Object(s.a)(t,2),a=r[0],c=r[1];return Object(U.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(U.jsxs)(I.a,{spacing:1,children:[Object(U.jsx)(M.a,{id:"code-input",label:"Course Code",variant:"filled",placeholder:"Quick search",value:a,onChange:function(e){return c(e.target.value.toUpperCase())},fullWidth:!0,size:"small",flex:1}),Object(U.jsx)(T.a,{variant:"caption",children:"Quick search shows courses for the current year. For more options, use advanced search."}),Object(U.jsx)(N.a,{variant:"outlined",color:"inherit",startIcon:Object(U.jsx)(B.a,{}),component:H.b,to:"/search",onClick:n,children:"Advanced Search"})]})})},Y=function(e){var t=e.loading,n=e.data,r=e.onCourseClick,a=e.pageControl,c=e.itemsPerPage,i=e.noOfPages;if(t)return Object(U.jsx)(_,{});if(null===n||x.a.isEmpty(n))return Object(U.jsxs)(I.a,{spacing:1,justifyContent:"center",alignItems:"center",children:[Object(U.jsx)(R.a,{flexItem:!0}),Object(U.jsx)(T.a,{variant:"body2",children:"Start searching to see courses here!"})]});var o=S(),l=Object(s.a)(a,2),u=l[0],j=l[1];return Object(U.jsxs)(I.a,{spacing:1,children:[Object(U.jsx)(R.a,{}),Object(U.jsx)(A.a,{count:i,page:u,onChange:function(e,t){j(t)},defaultPage:1,siblingCount:0,boundaryCount:1,color:"primary",sx:{ul:o.paginator}}),Object(U.jsx)(R.a,{}),Object(U.jsx)(L.a,{dense:!0,children:Object.keys(n).slice((u-1)*c,u*c).map((function(e){var t=n[e],a=t.courseTitle,c=t.code,i=t.section,o=t.session;return Object(U.jsx)(F.a,{button:!0,onClick:function(){return r(t)},component:H.b,to:"/course/".concat(o,"/").concat(i.toLowerCase(),"/").concat(c.toLowerCase()),children:Object(U.jsx)(W.a,{primary:a,secondary:"".concat(c).concat(i)})},e)}))})]})},Q=n(226),z=n(250),K=n(251),X=n(236),Z=n(112),$=n.n(Z),ee=n(113),te=n.n(ee),ne=n(114),re=n.n(ne),ae=function(e){var t=e.label,n=e.icon,r=e.right,a=void 0===r?null:r,c=e.to,i=void 0===c?null:c,o=e.onClick,s=void 0===o?null:o;return Object(U.jsx)(F.a,{children:Object(U.jsxs)(Q.a,{component:H.b,to:i,onClick:s,children:[Object(U.jsx)(z.a,{children:n}),Object(U.jsx)(W.a,{primary:t}),a]})})},ce=function(e){var t=e.children,n=e.mobileClose;return Object(U.jsxs)(L.a,{dense:!0,children:[Object(U.jsx)(K.a,{id:"site-functions",children:"Site functions"}),Object(U.jsx)(ae,{label:"Bookmarks",icon:Object(U.jsx)($.a,{}),to:"/bookmarks",onClick:n}),Object(U.jsx)(ae,{label:"Timetable",icon:Object(U.jsx)(te.a,{}),to:"/timetable",onClick:n}),Object(U.jsx)(ae,{label:"Settings",icon:Object(U.jsx)(re.a,{}),to:"/settings",onClick:n}),Object(U.jsx)(K.a,{id:"search",children:"Search"}),Object(U.jsx)(F.a,{children:t})]})},ie=function(e){var t=e.children,n=e.navControl,r=e.mobile,a=Object(s.a)(n,2),c=a[0],i=a[1],o=S(),l=function(e){return{mobileSx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:e}},permanentSx:{display:{xs:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:e}}}}(o.drawerWidth),u=l.mobileSx,j=l.permanentSx,b=function(){i(!c)};return Object(U.jsx)(h.a,{sx:o.drawer,"aria-label":"search",children:Object(U.jsxs)(X.a,{variant:r?"temporary":"permanent",open:!r||c,onClose:r?b:null,ModalProps:{keepMounted:!0},sx:r?u:j,children:[Object(U.jsx)(O.a,{}),Object(U.jsx)(R.a,{}),Object(U.jsx)(ce,{children:t,mobileClose:r?b:null})]})})},oe=n(227),se=n(231),le=n(253),ue=n(254),je=n(118),be=n.n(je),de=n(117),Oe=n.n(de),he=n(115),fe=n.n(he),pe=n(116),xe=n.n(pe),me=n(120),ve=n.n(me),ge=(n(119),function(e){var t=e.children,n=Object(oe.a)({disableHysteresis:!0,threshold:0});return Object(r.cloneElement)(t,{elevation:n?4:0})}),Ce=function(e){var t=e.title,n=e.navControl,a=e.themeControl,c=e.favoriteControl,i=e.mobile,o=Object(s.a)(a,2),l=o[0],u=o[1],j=Object(s.a)(n,2),b=j[0],d=j[1],h=Object(s.a)(c,2),f=h[0],p=h[1],x=Object(r.useState)(f),m=Object(s.a)(x,2),v=m[0],g=m[1];Object(r.useEffect)((function(){g(f)}),[t,f]);var C=function(){d(!b)},y=function(){p(v?"remove":"add")},k=S(),w=function(){return Object(U.jsx)(se.a,{title:"Toggle theme",children:Object(U.jsx)(le.a,{color:"inherit","aria-label":"toggle theme",onClick:function(){return u(!l)},children:l?Object(U.jsx)(fe.a,{}):Object(U.jsx)(xe.a,{})})})},E=function(){return t?Object(U.jsx)(se.a,{title:"".concat(v?"Remove from":"Add to"," favorites"),children:Object(U.jsx)(le.a,{color:"inherit",onClick:y,children:v?Object(U.jsx)(Oe.a,{}):Object(U.jsx)(be.a,{})})}):null},J=function(){return i?Object(U.jsx)(le.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:C,sx:k.menuButton,children:Object(U.jsx)(ve.a,{})}):null},P=function(){return Object(U.jsx)(T.a,{variant:"h6",sx:k.flex,children:t})};return Object(U.jsx)(ge,{children:Object(U.jsx)(ue.a,{position:"fixed",sx:k.appBar,children:Object(U.jsxs)(O.a,{children:[Object(U.jsx)(J,{}),Object(U.jsx)(P,{}),Object(U.jsx)(E,{}),Object(U.jsx)(w,{})]})})})},ye=n(258),Se=n(237),ke=function(e){var t=e.subheader;return Object(U.jsx)(T.a,{variant:"h5",paragraph:!0,children:t})},we=function(e){var t=e.title,n=e.retrievedOn;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(T.a,{variant:"h4",children:t}),Object(U.jsx)(T.a,{variant:"body2",children:"Retrieved on ".concat(n)})]})},Ee=function(e){var t=e.description;return t?Object(U.jsx)(T.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}}):null},Je=function(e){var t=e.prerequisite;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Pre-requisites: ".concat(t)}):null},Pe=function(e){var t=e.corequisite;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Co-requisites: ".concat(t)}):null},Ie=function(e){var t=e.exclusion;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Exclusions: ".concat(t)}):null},Me=function(e){var t=e.recommendedPreparation;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Recommended preparation: ".concat(t)}):null},Te=function(e){var t=e.breadthCategories;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Breadth categories: ".concat(t)}):null},Ne=function(e){var t=e.distributionCategories;return t?Object(U.jsx)(T.a,{variant:"body1",children:"Distribution categories: ".concat(t)}):null},Re=function(e){var t=e.webTimetableInstructions;return t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(T.a,{variant:"body1",children:"Timetable instructions:"}),Object(U.jsx)(T.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}})]}):null},Ae=function(e){var t=e.deliveryInstructions;return t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(T.a,{variant:"body1",children:"Delivery instructions:"}),Object(U.jsx)(T.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t}})]}):null},Le=function(e){var t=e.prerequisite,n=e.corequisite,r=e.exclusion,a=e.recommendedPreparation;return t||n||r||a?Object(U.jsxs)(I.a,{spacing:1,children:[Object(U.jsx)(ke,{subheader:"Enrollment limitations"}),Object(U.jsx)(Je,{prerequisite:t}),Object(U.jsx)(Pe,{corequisite:n}),Object(U.jsx)(Ie,{exclusion:r}),Object(U.jsx)(Me,{recommendedPreparation:a})]}):null},Fe=function(e){var t=e.breadthCategories,n=e.distributionCategories;return t||n?Object(U.jsxs)(I.a,{spacing:1,children:[Object(U.jsx)(ke,{subheader:"Breadth classifications"}),Object(U.jsx)(Te,{breadthCategories:t}),Object(U.jsx)(Ne,{distributionCategories:n})]}):null},We=function(e){var t=e.webTimetableInstructions,n=e.deliveryInstructions;return t||n?Object(U.jsxs)(I.a,{spacing:1,children:[Object(U.jsx)(ke,{subheader:"Additional instructions"}),Object(U.jsx)(Re,{webTimetableInstructions:t}),Object(U.jsx)(Ae,{deliveryInstructions:n})]}):null},De=n(255),Be=n(256),He=n(257),Ge=n(121),Ue=n.n(Ge),_e=function(e){if(x.a.isEmpty(e))return"TBA";var t="";return Object.entries(e).forEach((function(e){var n=Object(s.a)(e,2)[1],r=n.lastName,a=n.firstName;t+=a+". "+r+", "})),t.substring(0,t.length-2)},qe=function(e,t){var n=e.meetingDay,r=e.meetingStartTime,a=e.meetingEndTime,c=e.assignedRoom1,i=e.assignedRoom2,o=function(e,t){switch(e){case"MO":return t?"Mon":"M";case"TU":return t?"Tue":"T";case"WE":return t?"Wed":"W";case"TH":return t?"Thu":"R";case"FR":return t?"Fri":"F";default:return null}}(n,t),s=t?r+" \u2013 "+a:r.replace(":","")+"\u2013"+a.replace(":","");if(!t)return o+" "+s;var l=function(e,t){return e||t?e&&t?e===t?e:e+"/"+t:e||t:"TBA"}(c,i);return o+" "+s+" "+(t?"at ":"")+l},Ve=function(e,t,n,r,a){var c=Number(e)-Number(t);return a?c>0?"Remaining capacity: ".concat(c+" out of "+e):r?"Waitlist: ".concat(n," (capacity: ").concat(e,")"):"Full, no waitlisting. (capacity: ".concat(e,")"):c>0?"Available: "+c:r?"Waitlist: "+n:"Full, no waitlisting"},Ye=function(e,t){switch(e){case"CLASS":return"In person";case"ONLSYNC":return t?"Online \u2014 Synchronous":"Online Sync";case"ONLASYNC":return t?"Online \u2014 Asynchronous":"Online Async";default:return null}},Qe=function(e){switch(e){case"P":return"Priority: Some students are given priority access until a specific date.";case"E":return"Enrol at Department: Students must contact the sponsoring Department to enrol.";case"AE":return"Department Approval Required: Students must request enrolment on ACORN and await Departmental review of their request.";case"PE":return"Priority, then Enrol at Department: Some students are given priority access until a specific date, after which time another group of students is also able to enrol by contacting the sponsoring Department.";case"R1":return"Restricted: Course/section is restricted at all times for specific students.";case"R2":return"Restricted: Course/section is restricted to a group of students until a specific date, after which time another group of students is also able to enrol.";default:return""}},ze=function(e){if(!e)return null;var t=e.toString().split(" ");return"".concat(t[1]," ").concat(t[2]," ").concat(t[3]," ").concat(t[4]," ").concat(t[6]," ").concat(t[7]," ").concat(t[8])},Ke=function(e,t){var n=e.substring(4);t=t.toLowerCase();var r,a="9"===n&&"f"===t||"5"===n?e.substring(2,4):Number(e.substring(2,4))+1;return"9"===n?r="f"===t?"Fall":"s"===t?"Winter":"Year-long":(r="Summer ",r+="f"===t?"(1st half)":"s"===t?"(2nd half)":"(full session)"),"'".concat(a," ").concat(r)},Xe=function(e){var t=e.meeting,n=e.onClick,r=t.schedule,a=t.instructors,c=t.teachingMethod,i=t.sectionNumber,o=t.enrollmentCapacity,j=t.actualEnrolment,b=t.actualWaitlist,d=t.waitlist,O=t.deliveryMode,h=t.enrollmentIndicator,f=t.enrollmentControls,p=t.cancel,x=function(){var e=Object(l.a)(),t=Object(u.a)(e.breakpoints.down("sm"))?"caption":"body2";if(p)return Object(U.jsx)(T.a,{variant:t,children:"Cancelled"});var n=!1;return Object(U.jsxs)(I.a,{spacing:1,direction:"row",divider:Object(U.jsx)(R.a,{orientation:"vertical",flexItem:!0}),children:[Object(U.jsx)(T.a,{variant:t,children:Ve(o,j,b,d,n)}),Object(U.jsx)(T.a,{variant:t,children:Ye(O,n)}),function(n){return Object(u.a)(e.breakpoints.down("sm"))?null:Object(U.jsx)(T.a,{variant:t,display:{xs:"none",sm:"block"},children:_e(n)})}(a),Object.entries(r).map((function(e){var r=Object(s.a)(e,2),a=r[0],c=r[1];return"-"===a?null:Object(U.jsx)(T.a,{variant:t,children:qe(c,n)},a)})),function(n){return Object(u.a)(e.breakpoints.down("sm"))||!n?null:Object(U.jsx)(T.a,{variant:t,children:n})}(h)]})},m="".concat(c+i);return Object(U.jsx)(F.a,{disableGutters:!0,children:Object(U.jsx)(Q.a,{onClick:function(){var e=!0;n({section:m,instructors:_e(a),meetings:Object.entries(r).filter((function(e){return"-"!==Object(s.a)(e,1)[0]})).map((function(t){var n=Object(s.a)(t,2)[1];return qe(n,e)})),delivery:Ye(O,e),priority:Qe(h),capacity:Ve(o,j,b,d,e),priorityGroups:f.map((function(e){return function(e){var t=e.postCode,n=e.postName,r=e.restrictedGroup,a=r?"Group ".concat(r," \u2014 "):"";if(t&&n)return a+t+" "+n;var c=e.yearOfStudy,i=e.primaryOrgName,o=e.secondaryOrgName,s=e.assocOrgName,l=e.adminOrgName||o||"";return a+(i?i+": ":"")+(c&&"*"!==c?"Year ".concat(c," "):"")+(l||s||"")}(e)}))})},children:Object(U.jsxs)(I.a,{children:[Object(U.jsx)(W.a,{primary:m}),Object(U.jsx)(x,{})]})})})},Ze=function(e){var t=e.data,n=e.onListEntryClick;return Object(U.jsx)(L.a,{dense:!0,children:Object.entries(t).map((function(e){var t=Object(s.a)(e,2),r=t[0],a=t[1];return Object(U.jsx)(Xe,{meeting:a,onClick:n},r)}))})},$e=function(e){var t=e.data,n=t.instructors,a=t.meetings,c=t.delivery,i=t.priority,o=t.capacity,l=t.priorityGroups,u=Object(r.useState)(!1),j=Object(s.a)(u,2),b=j[0],d=j[1];return Object(U.jsx)(De.a,{children:Object(U.jsxs)(I.a,{spacing:2,divider:Object(U.jsx)(R.a,{}),children:[Object(U.jsx)(T.a,{variant:"body1",children:"Instructors: ".concat(n)}),Object(U.jsx)(T.a,{variant:"body1",children:"Delivery mode: ".concat(c)}),Object(U.jsx)(T.a,{variant:"body1",children:o}),Object(U.jsxs)(I.a,{children:[Object(U.jsx)(T.a,{variant:"body1",paragraph:!0,children:"Meetings:"}),a.map((function(e){return Object(U.jsx)(T.a,{variant:"body2",children:e},e)}))]}),i?Object(U.jsxs)(I.a,{children:[Object(U.jsx)(T.a,{variant:"body1",paragraph:!0,children:"Enrollment priority:"}),Object(U.jsx)(T.a,{variant:"body2",children:i})]}):null,x.a.isEmpty(l)?null:Object(U.jsxs)(I.a,{children:[Object(U.jsxs)(I.a,{direction:"row",spacing:1,alignItems:"center",paddingBottom:1,children:[Object(U.jsx)(T.a,{variant:"body1",children:"Priority student groups:"}),Object(U.jsx)(le.a,{onClick:function(){return d(!b)},children:Object(U.jsx)(Ue.a,{sx:{transform:b?"rotate(-180deg)":"rotate(0)",transition:"0.2s"}})})]}),Object(U.jsx)(I.a,{sx:{display:b?"block":"none"},children:l.map((function(e,t){return Object(U.jsx)(T.a,{variant:"body2",children:e},t)}))})]})]})})},et=function(e){var t=e.data,n=(e.timetablesControl,Object(r.useState)(!1)),a=Object(s.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)({section:"",instructors:"",meetings:[],delivery:"",priority:"",capacity:"",priorityGroups:[]}),l=Object(s.a)(o,2),u=l[0],j=l[1];if(!t)return null;return Object(U.jsxs)(I.a,{children:[Object(U.jsx)(T.a,{variant:"h5",paragraph:!0,children:"Meeting sections"}),Object(U.jsx)(Ze,{data:t,onListEntryClick:function(e){i(!0),j(e)}}),Object(U.jsxs)(Be.a,{open:c,onClose:function(){return i(!1)},maxWidth:"sm",fullWidth:!0,children:[Object(U.jsx)(He.a,{children:u.section}),Object(U.jsx)($e,{data:u})]})]})},tt=function(){return P.a.create({baseURL:"https://ionice.herokuapp.com/https://timetable.iit.artsci.utoronto.ca/api/",headers:{}})},nt=[{value:"20169",label:"'16 Fall - '17 Winter",short_label:"'16-'17 FW"},{value:"20175",label:"'17 Summer",short_label:"'17 S"},{value:"20179",label:"'17 Fall - '18 Winter",short_label:"'17-'18 FW"},{value:"20185",label:"'18 Summer",short_label:"'18 S"},{value:"20189",label:"'18 Fall - '19 Winter",short_label:"'18-'19 FW"},{value:"20195",label:"'19 Summer",short_label:"'19 S"},{value:"20199",label:"'19 Fall - '20 Winter",short_label:"'19-'20 FW"},{value:"20205",label:"'20 Summer",short_label:"'20 S"},{value:"20209",label:"'20 Fall - '21 Winter",short_label:"'20-'21 FW"},{value:"20215",label:"'21 Summer",short_label:"'21 S"},{value:"20219",label:"'21 Fall - '22 Winter",short_label:"'21-'22 FW"}],rt=["20169","20175","20179","20185","20189","20195","20199","20205","20209","20215","20219"].flatMap((function(e){return[{session:e,section:"f"},{session:e,section:"s"},{session:e,section:"y"}]})),at=("ABP/ACT/AFR/AMS/ANA/ANT/APM/ARC/ARH/AST/BCB/BCH/BIO/BMS/BPM/CAR/CAS/CDN/CHC/CHM/CIN/CJH/CJS/CLA/CLT/COG/COL/CRE/CRI/CSB/CSC/CSE/CTA/DHU/DRM/DTS/EAS/ECE/ECO/EDS/EDU/EEB/EHJ/ELL/ENG/ENT/ENV/ESS/EST/ETH/EUR/FAH/FCS/FIN/FOR/FRE/FSL/GER/GGR/GRK/HAJ/HIS/HMB/HPS/HST/HUN/IFP/IMC/IMM/INI/INS/IRE/ITA/IVP/JAH/JAL/JAR/JCA/JCC/JCI/JDC/JEE/JEG/JEH/JEI/JFE/JFG/JFL/JFP/JFV/JGA/JGE/JGI/JGJ/JGU/JHA/JHE/JHN/JHP/JIA/JIG/JLN/JLP/JLS/JMB/JNH/JNR/JNS/JOP/JPA/JPD/JPE/JPF/JPH/JPI/JPM/JPP/JPR/JPS/JPU/JQR/JRA/JSC/JSH/JSR/JSU/JSV/JUG/JUM/JWE/LAS/LAT/LCT/LIN/LMP/MAT/MCS/MGR/MGT/MGY/MHB/MIJ/MST/MUN/MUS/NEW/NFS/NMC/NML/NUS/PCJ/PCL/PHC/PHL/PHS/PHY/PLN/POL/PPG/PRT/PSL/PSY/REN/RLG/RSM/SAS/SDS/SLA/SMC/SOC/SPA/STA/SWE/SWK/TRN/UNI/URB/USA/UTP/VIC/WDW/WGS/WRR".split("/"),function(){var e=Object(E.a)(w.a.mark((function e(t){var n,r,a,c,i,o,l=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,r=tt(),a=n?rt.filter((function(e){var t=e.session,r=e.section;return!(t>n.session)&&!(t===n.session&&r>=n.section)})):rt,c=n?n.session+n.section:"",i={},o=a.map((function(e){var n=e.session;return r.get("".concat(n,"/courses/"),{params:{code:t}})})),e.abrupt("return",Promise.all(o).then((function(e){return e.forEach((function(e){Array.isArray(e.data)||Object.entries(e.data).forEach((function(e){var t=Object(s.a)(e,2)[1],n=t.session,r=t.section;i.hasOwnProperty(n+r)||n+r===c||(i[n+r]=t)}))})),i})).catch((function(e){return console.log(e)})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ct=function(e){var t=e.courseCode,n=e.currSection,a=e.currSession,c=e.mobile,i=Object(r.useState)(!1),o=Object(s.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)({}),b=Object(s.a)(j,2),d=b[0],O=b[1],h=Object(r.useRef)(!0);return Object(r.useEffect)((function(){var e=function(){var e=Object(E.a)(w.a.mark((function e(){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(t,{session:a,section:n});case 2:if(r=e.sent,h.current){e.next=5;break}return e.abrupt("return");case 5:O(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h.current=!0,u(!0),e().then((function(){return u(!1)})),function(){h.current=!1}}),[t,a,n]),Object(U.jsxs)(I.a,{divider:c?null:Object(U.jsx)(R.a,{}),spacing:c?0:2,children:[Object(U.jsx)(T.a,{variant:"h5",paragraph:c,children:"Past offerings"}),Object(U.jsx)(it,{data:d,loading:l,mobile:c})]})},it=function(e){var t=e.data,n=e.loading,r=e.mobile;return window.navigator.onLine?n?Object(U.jsx)(_,{}):!t||x.a.isEmpty(t)?Object(U.jsx)(T.a,{variant:"body2",children:"This course code has no past offerings."}):Object(U.jsx)(L.a,{dense:!r,children:Object.entries(t).reverse().map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)(ot,{data:r},n)}))}):Object(U.jsx)(T.a,{variant:"body2",children:"Past offerings data is not available when offline."})},ot=function(e){var t=e.data,n=t.session,r=t.code,a=t.section,c=function(e){var t=Object.entries(e).filter((function(e){return"LEC"===Object(s.a)(e,2)[1].teachingMethod})),n=new Set,r=[],a=0;return t.forEach((function(e){var t=Object(s.a)(e,2)[1];Object.entries(t.instructors).forEach((function(e){var t=Object(s.a)(e,2)[1],a="".concat(t.firstName,". ").concat(t.lastName);n.has(a)||(r.push(a),n.add(a))})),t.cancel||(a+=Number(t.actualEnrolment)/Number(t.enrollmentCapacity))})),[r.sort((function(e,t){return e.split(" ")[1]>t.split(" ")[1]?1:-1})).join(", "),0!==t.length?a/t.length:0]}(t.meetings),i=Object(s.a)(c,2),o=i[0],l=i[1],u=l?Math.round(100*l):0;return Object(U.jsx)(F.a,{disableGutters:!0,children:Object(U.jsx)(Q.a,{component:H.b,to:"/course/".concat(n,"/").concat(a.toLowerCase(),"/").concat(r.toLowerCase()),children:Object(U.jsxs)(I.a,{children:[Object(U.jsx)(W.a,{primary:Ke(n,a)}),Object(U.jsxs)(I.a,{direction:"row",divider:Object(U.jsx)(R.a,{orientation:"vertical",flexItem:!0}),spacing:1,children:[Object(U.jsx)(T.a,{variant:"caption",children:"Occupancy: ".concat(u,"%")}),Object(U.jsx)(T.a,{variant:"caption",children:o})]})]})})})},st=function(e){var t=e.currDisplayedDataControl,n=e.currFetchedData,a=e.favorites,c=e.timetablesControl,i=Object(f.f)(),j=Object(r.useState)(!1),b=Object(s.a)(j,2),d=b[0],O=b[1],p=Object(s.a)(t,2),m=p[0],v=p[1],g=Object(r.useRef)(!0),C=Object(l.a)(),y=Object(u.a)(C.breakpoints.down("lg"));if(Object(r.useEffect)((function(){var e=i.pathname.replace("/course","").toUpperCase().split("/").filter((function(e){return e}));3!==e.length&&(v({}),O(!1));var t=e[2],r=e[1],c=e[0],s="".concat(t,"-").concat(r,"-").concat(c);if(n.hasOwnProperty(s))v(n[s]),O(!1);else{if(O(!0),!window.navigator.onLine)return g.current=!1,a.hasOwnProperty(s)?v(a[s]):v({}),void O(!1);var l=new Date;tt().get("".concat(c,"/courses/"),{params:{code:t,section:r}}).then((function(e){v(e.data[s]?Object(o.a)(Object(o.a)({},e.data[s]),{},{updated:l}):{}),O(!1)})).catch((function(){v({}),O(!1)}))}}),[i]),d)return Object(U.jsx)(_,{});if(!g.current&&x.a.isEmpty(m))return Object(U.jsx)(T.a,{children:"You are currently offline. Please try again later."});if(0===Object.keys(m).length)return Object(U.jsx)(ye.a,{maxWidth:"lg",children:Object(U.jsx)(h.a,{display:"flex",justifyContent:"center",children:Object(U.jsx)(T.a,{variant:"h4",children:"Invalid URL. Perhaps you visited a broken link?"})})});var S=m.code,k=m.section,w=m.session,E=m.courseTitle,J=m.courseDescription,P=m.prerequisite,M=m.corequisite,N=m.exclusion,A=m.recommendedPreparation,L=m.breadthCategories,F=m.distributionCategories,W=m.webTimetableInstructions,D=m.deliveryInstructions,B=m.meetings,H=m.updated;return Object(U.jsxs)(Se.a,{container:!0,children:[Object(U.jsx)(Se.a,{item:!0,xs:12,lg:9,children:Object(U.jsx)(ye.a,{maxWidth:"lg",children:Object(U.jsxs)(I.a,{spacing:3,divider:Object(U.jsx)(R.a,{}),children:[Object(U.jsx)(we,{title:E,retrievedOn:ze(H)}),Ee({description:J}),Le({prerequisite:P,corequisite:M,exclusion:N,recommendedPreparation:A}),Fe({breadthCategories:L,distributionCategories:F}),We({webTimetableInstructions:W,deliveryInstructions:D}),Object(U.jsx)(et,{data:B,timetablesControl:c}),y?Object(U.jsx)(ct,{courseCode:S,currSection:k,currSession:w,mobile:!0}):null]})})}),y?null:Object(U.jsx)(Se.a,{item:!0,xs:12,lg:3,children:Object(U.jsx)(ye.a,{maxWidth:"sm",children:Object(U.jsx)(ct,{courseCode:S,currSection:k,currSession:w,mobile:!1})})})]})},lt=n(248),ut=n(122),jt=n.n(ut),bt=function(){return Object(U.jsx)(T.a,{variant:"h4",children:"Bookmarked Courses"})},dt=function(e){var t=e.favoritesControl,n=Object(s.a)(t,2),r=n[0],a=n[1];if(Object.keys(r).length<1)return Object(U.jsx)(h.a,{display:"flex",justifyContent:"center",children:Object(U.jsx)(T.a,{variant:"body2",children:"You don't have any bookmarked courses yet. To bookmark a course, click the add bookmark button on the top-right corner when you're at a course page."})});var c=function(e){var t=e.entry,n=t.courseTitle,r=t.code,c=t.section,i=t.session;return Object(U.jsxs)(F.a,{disableGutters:!0,children:[Object(U.jsx)(Q.a,{component:H.b,to:"/course/".concat(i,"/").concat(c.toLowerCase(),"/").concat(r.toLowerCase()),children:Object(U.jsx)(W.a,{primary:"".concat(n),secondary:"".concat(r).concat(c)})}),Object(U.jsx)(lt.a,{children:Object(U.jsx)(le.a,{onClick:function(){return a("remove","".concat(r,"-").concat(c,"-").concat(i))},children:Object(U.jsx)(jt.a,{})})})]})};return Object(U.jsx)(L.a,{dense:!0,children:Object.entries(r).sort((function(e,t){return e<t?-1:1})).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)(c,{entry:r},n)}))})},Ot=function(e){var t=e.favoritesControl;return Object(U.jsx)(ye.a,{maxWidth:"lg",children:Object(U.jsxs)(I.a,{spacing:3,divider:Object(U.jsx)(R.a,{}),children:[Object(U.jsx)(bt,{}),Object(U.jsx)(dt,{favoritesControl:t})]})})},ht=function(e){var t=e.timetablesControl;t.timetables,t.updateTimetables;return Object(U.jsx)(ye.a,{maxWidth:"lg",children:Object(U.jsx)(T.a,{variant:"h4",children:"Work in progress, check back soon."})})},ft=function(e){var t=e.favoritesControl,n=e.currFetchedData,r=e.currDisplayedDataControl,a=e.timetablesControl,c=Object(s.a)(t,1)[0];return Object(U.jsxs)(f.c,{children:[Object(U.jsx)(f.a,{path:"/course",children:Object(U.jsx)(st,{currDisplayedDataControl:r,currFetchedData:n,favorites:c})}),Object(U.jsx)(f.a,{path:"/bookmarks",children:Object(U.jsx)(Ot,{favoritesControl:t})}),Object(U.jsx)(f.a,{path:"/timetable",children:Object(U.jsx)(ht,{timetablesControl:a})})]})},pt=function(){var e=S(),t=Object(l.a)(),n=Object(u.a)(t.breakpoints.down("md")),a=Object(f.f)(),c=Object(r.useState)("dark"===localStorage.getItem("darkMode")),p=Object(s.a)(c,2),k=p[0],w=p[1],E=Object(r.useState)(!1),J=Object(s.a)(E,2),P=J[0],I=J[1],M=Object(r.useState)(""),T=Object(s.a)(M,2),N=T[0],R=T[1],A=Object(r.useState)({}),L=Object(s.a)(A,2),F=L[0],W=L[1],D=Object(r.useState)({}),B=Object(s.a)(D,2),H=B[0],G=B[1],_="dfsoudfhsud",V="asfoahfisd",Y=Object(r.useState)(function(){var e=localStorage.getItem(_);return e?JSON.parse(e):{}}()),Q=Object(s.a)(Y,2),z=Q[0],K=Q[1],X=Object(r.useState)(function(){var e=localStorage.getItem(V);return e?JSON.parse(e):{}}()),Z=Object(s.a)(X,2),$=Z[0],ee=Z[1];Object(r.useEffect)((function(){var e=function(e){"darkMode"===e.key?w("dark"===e.newValue):e.key===_?K(JSON.parse(e.newValue)):e.key===V&&ee(JSON.parse(e.newValue))};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]),Object(r.useEffect)((function(){var e=function(e,t,n){if("/search"===e)return"Search";if("/favorites"===e)return"Favorites";if("/timetable"===e)return"Timetable";if("/settings"===e)return"Settings";if(e.startsWith("/course")){if(x.a.isEmpty(t))return"";if(t.session!==x.a.last(nt).value){var r=nt.filter((function(e){return e.value===t.session}));return"".concat(t.code).concat(t.section," (").concat(n?"":"Session: ").concat(x.a.isEmpty(r)?t.session:r[0].short_label,")")}return"".concat(t.code).concat(t.section)}return"Boreal"}(a.pathname,F,n);R(a.pathname.startsWith("/course")?e:""),document.title="Boreal".concat("Boreal"===e?"":" \u2014 "+e)}),[a,F,n]),Object(r.useEffect)((function(){localStorage.setItem("darkMode",k?"dark":"light")}),[k]);var te,ne=function(){return x.a.isEmpty(F)?null:"".concat(F.code,"-").concat(F.section,"-").concat(F.session)},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne();t&&K((function(n){if("add"!==e&&"remove"!==e)return n;var r="remove"===e?x.a.omit(n,t):Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},t,F));return localStorage.setItem(_,JSON.stringify(r)),r}))};return Object(U.jsx)(j.a,{injectFirst:!0,children:Object(U.jsxs)(b.a,{theme:(te=k,Object(m.a)(Object(v.a)({palette:{mode:te?"dark":"light",primary:{main:g.a[800]},secondary:{main:C.a[50]},error:{main:y.a[500]}},typography:{fontFamily:["Roboto","Quicksand"].join(",")},components:{MuiTypography:{defaultProps:{variantMapping:{h4:"h1",h5:"h2",h6:"h3"}},styleOverrides:{h3:{fontFamily:"Quicksand",fontWeight:300},h4:{fontFamily:"Quicksand",fontWeight:300},h5:{fontFamily:"Quicksand",fontWeight:400},h6:{fontFamily:"Quicksand",fontWeight:400}}}}}))),children:[Object(U.jsx)(d.a,{}),Object(U.jsx)(Ce,{title:N,navControl:[P,I],themeControl:[k,w],favoriteControl:[Object.keys(z).includes(ne()),re],mobile:n}),Object(U.jsx)(ie,{mobile:n,navControl:[P,I],children:Object(U.jsx)(q,{fetchedDataControl:[H,G],onCourseSelection:function(){I(!1)},onButtonClick:function(){return I(!P)}})}),Object(U.jsx)(O.a,{}),Object(U.jsx)(h.a,{sx:n?e.contentMobileWrapper:e.contentWrapper,children:Object(U.jsx)(ft,{favoritesControl:[z,re],timetablesControl:[$,function(e,t){t.session,t.code,t.section;var n=t.meeting;n.teachingMethod,n.sectionNumber,n.schedule}],currFetchedData:H,currDisplayedDataControl:[F,W]})})]})})};c.a.render(Object(U.jsx)(H.a,{children:Object(U.jsx)(pt,{})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.6da52dc2.chunk.js.map